(this.webpackJsonpfacebook=this.webpackJsonpfacebook||[]).push([[0],{48:function(e,t,a){e.exports=a(77)},53:function(e,t,a){},54:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},55:function(e,t,a){},56:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){e.exports=a.p+"static/media/favicon copy.05ea36a5.ico"},77:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(13),r=a.n(c),s=(a(53),a(11)),l=(a(54),a(55),a(104)),i=a(105),m=a(106),u=a(100),p=a(101),d=(a(56),Object(n.createContext)()),f=function(e){var t=e.reducer,a=e.initialState,c=e.children;return o.a.createElement(d.Provider,{value:Object(n.useReducer)(t,a)},c)},g=function(){return Object(n.useContext)(d)},h=Object(n.forwardRef)((function(e,t){var a=e.message,n=(e.username,e.user),c=n.displayName===a.username;return console.log(n),console.log(a),o.a.createElement("div",{ref:t,className:"message ".concat(c&&"message_user")},o.a.createElement(m.a,{className:c?"message_useCard":"message_guestCard"},o.a.createElement(u.a,null,o.a.createElement(p.a,{component:"h2",color:"white",variant:"h5"},o.a.createElement("div",{className:"finalmessage"},o.a.createElement(i.a,{src:a.profilepic,className:"post_avatar"}),!c&&"".concat(a.username||"Unknown User"," : "),a.message),a.image&&o.a.createElement("img",{src:a.image})))))})),b=a(17),E=a.n(b),v=E.a.initializeApp({apiKey:"AIzaSyBn_TFqeX0i5UIYKw-UwRFZvWCsSrGXHok",authDomain:"facebook-messenger-clone-3673b.firebaseapp.com",databaseURL:"https://facebook-messenger-clone-3673b.firebaseio.com",projectId:"facebook-messenger-clone-3673b",storageBucket:"facebook-messenger-clone-3673b.appspot.com",messagingSenderId:"14384352743",appId:"1:14384352743:web:da3371c9c3e285b313c142",measurementId:"G-MXP1RTK38J"}).firestore(),j=E.a.auth(),O=new E.a.auth.GoogleAuthProvider,k=v,S=a(41),y=a(40),w=a.n(y),N=a(103),_=(a(71),a(102)),I=a(39),C=a.n(I);a(72);var T=function(){var e=g(),t=Object(s.a)(e,2),a=t[0],c=a.user,r=(a.token,t[1],Object(n.useState)("")),i=Object(s.a)(r,2),m=i[0],u=i[1],p=Object(n.useState)(""),d=Object(s.a)(p,2),f=(d[0],d[1]),b=Object(n.useState)([]),v=Object(s.a)(b,2),j=v[0],O=v[1],y=Object(n.useState)(),I=Object(s.a)(y,2),T=I[0],U=(I[1],Object(n.useState)("")),R=Object(s.a)(U,2),F=R[0],x=R[1],A=Object(n.useState)(""),B=Object(s.a)(A,2),D=B[0],J=B[1],K=Object(n.useState)(function(){var e="light-theme";return localStorage.getItem("theme")&&(e=localStorage.getItem("theme")),e}()),P=Object(s.a)(K,2),W=P[0],z=P[1],G=o.a.useState(!1),L=Object(s.a)(G,2);return L[0],L[1],Object(n.useEffect)((function(){document.documentElement.className=W,localStorage.setItem("theme",W)}),[W]),Object(n.useEffect)((function(){k.collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){O(e.docs.map((function(e){return{id:e.id,message:e.data()}}))),console.log(e.docs.map((function(e){return{id:e.id}})))}))}),[]),Object(n.useEffect)((function(e){D&&(k.collection("messages").add({message:m,username:c.displayName,timestamp:E.a.firestore.FieldValue.serverTimestamp(),image:D,profilepic:c.photoURL}),u(""),J(""),x(""))}),[D]),console.log(j),console.log(j),o.a.createElement("div",{className:"App"},o.a.createElement("img",{src:"https://facebookbrand.com/wp-content/uploads/2018/09/Header-e1538151782912.png?w=100&h=100"}),o.a.createElement("h1",null,"hello programmers "),o.a.createElement("h3",null,"welcome ",c.displayName," "),o.a.createElement("button",{className:"btn",onClick:function(){z("light-theme"===W?"dark-theme":"light-theme")}},"change theme"),o.a.createElement("form",{className:"app_form"},o.a.createElement(l.a,{className:"app_formcontrol"},o.a.createElement("input",{className:"app_input",placeholder:"Enter a message...",value:m,onChange:function(e){return u(e.target.value)}}),o.a.createElement("label",{htmlFor:"upload-photo"},o.a.createElement("input",{style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file",onChange:function(e){x(e.target.files[0]),f(e.target.value)}}),o.a.createElement(_.a,{color:"primary",size:"small",component:"span","aria-label":"add"},o.a.createElement(C.a,null))),o.a.createElement(N.a,{className:"app_iconbutton",type:"submit",variant:"contained",color:"primary",disabled:!m,onClick:function(e){if(F){var t=new FormData;t.append("file",F),t.append("upload_preset","insta-clone"),t.append("cloud_name","esprit"),fetch("https://api.cloudinary.com/v1_1/hamma/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){J(e.url)})).catch((function(e){console.log(e)})),e.preventDefault()}else k.collection("messages").add({message:m,username:c.displayName,timestamp:E.a.firestore.FieldValue.serverTimestamp(),profilepic:c.photoURL}),u(""),e.preventDefault()}},o.a.createElement(w.a,null)))),o.a.createElement(S.a,null,j.map((function(e){var t=e.id,a=e.message;return o.a.createElement(h,{key:t,username:T,message:a,user:c})}))))},U=(a(74),a(25)),R="SET_USER",F="SET_TOKEN",x=function(e,t){switch(console.log(t),t.type){case R:return Object(U.a)(Object(U.a)({},e),{},{user:t.user});case F:return Object(U.a)(Object(U.a)({},e),{},{token:t.token});default:return e}};var A=function(){var e=g(),t=Object(s.a)(e,2),a=(t[0],t[1]);return o.a.createElement("div",{className:"login"},o.a.createElement("button",{className:"form-input-btn",onClick:function(){j.signInWithPopup(O).then((function(e){a({type:R,user:e.user}),console.log(e.user.refreshToken),a({type:F,token:e.user.refreshToken}),localStorage.setItem("User",JSON.stringify(e.user))})).catch((function(e){return alert(e.message)}))}},"Sign up"))};a(75),a(76);var B=function(){var e=g(),t=Object(s.a)(e,2),a=t[0],n=a.user;return a.token,t[1],o.a.createElement("div",{className:"App"},n?o.a.createElement(T,null):o.a.createElement(A,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,{initialState:{user:null,token:null},reducer:x},o.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.d895c25e.chunk.js.map